using EagleEye.Extractor.Amazon;
using EagleEye.Extractor.Tesseract;
using Xunit;

namespace EagleEye.Extractor.Tests.Tesseract
{
    public class SolveCaptchaTests
    {
        [Fact]
        public void ShouldSolve_ACYKRB()
        {
            // ACYKRB
            var base64 = "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";
            var service = CreateTesseractService();

            var result = service.Execute(base64);

            Assert.Equal("ACYKRB", result);
        }

        private static RunPythonTesseract CreateTesseractService()
        {
            return new RunPythonTesseract(
                "C:\\Users\\weiru\\Anaconda3\\python.exe",
                "C:\\Projects\\GitHub\\EagleEye\\EagleEye.Captcha\\captcha_v2.py");
        }
    }
}